!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MVVM=e():t.MVVM=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var i=n(1),r=n(3);function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$options=e||{};var n=this._data=this.$options.data,o=this;Object.keys(n).forEach((function(t){o._proxyData(t)})),Object(r.default)(n,this),new i.Compile(Option.el||document.body,this)}var e,n,u;return e=t,(n=[{key:"_proxyData",value:function(t,e,n){var i=this;e=e||Object.defineProperty(this,t,{configurable:!1,enumerable:!0,get:function(){return i._data[t]},set:function(e){i.data[t]=e}})}}])&&o(e.prototype,n),u&&o(e,u),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"Compile",(function(){return u}));var i=n(2);var r=null,o={bind:function(t,e,n,r){var o=update["".concat(r,"Updater")];o&&o(t,this._getVmVal),new i.default(e,n,(function(e,n){o&&o(t,e,n)}))},html:function(t,e,n){this.bind(t,e,n,"html")},text:function(t,e,n){this.bind(t,e,n,"text")},class:function(t,e,n){this.bind(t,e,n,"class")},model:function(t,e,n){this.bind(t,e,n,"model");var i=this,o=this._getVmVal(e,n);t.addEventListener("input",(function(t){var u=t.target.value;t.target,o!==u&&(clearTimeout(r),r=setTimeout((function(){i._setVmVal(e,n,u),function(t){throw new Error('"'+t+'" is read-only')}("val"),o=u})))}))},eventHandler:function(t,e,n,i){console.log(e,"vm");var r=i.split(":")[1],o=e.$options.methods&&e.$options.methods[n];r&&o&&t.addEventListener(r,o.bind(e),!1)},_getVmVal:function(t,e){var n=t;return e.split(".").forEach((function(t){t=t.trim(),n=n[t]})),n},_setVmVal:function(t,e,n){var i=t,r=e.split(".");r.forEach((function(t,e){t=t.trim(),e<r.length-1?i=i[t]:i[t]=n}))}},u=function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.compileElement=function(t){var e=t.childNodes;Array.from(e).forEach((function(t){var e=t.textContent;i.isElementNode(t)?i.compile(t):i.isTextNode(t)&&/\{\{((?:.|\n)+?)\}\}/.test(e)&&i.compileText(t,RegExp.$1.trim()),t.childNodes&&t.childNodes.length&&i.compileElement(t)}))},this.nodeFragment=function(t){for(var e,n=document.createDocumentFragment();e=t.firstChild;)n.append(e);return n},this.compile=function(t){var e=t.attributes;Array.from(e).map((function(e){var n=e.name;if(i.isDirective(n)){var r=e.value,u=n.substring(2);i.isEventDirective?o.eventHandler(t,i.$vm,r,u):o[u]&&o[u](t,i.$vm,r),t.removeAttribute(n)}}))},this.compileText=function(t,e){t.textContent=void 0===i.$vm[e]?"":i.$vm[e]},this.isElementNode=function(t){return 1===t.nodeType},this.isTextNode=function(t){return 3===t.nodeType},this.isDirective=function(t){return 0===t.indexOf("x-")},this.isEventDirective=function(t){return 0===t.indexOf("on")},this.$vm=n,this.$el=this.isElementNode(e)?e:document.querySelector(e),this.$el&&(this.$fragment=this.nodeFragment(this.$el),this.compileElement(this.$fragment),this.$el.appendChild(this.$fragment))}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return o}));var i=n(3);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vm=e,this.expOrFn=n.trim(),this.cb=i,this.depIds={},this.getter="function"==typeof n?n:this.parseGetter(n),this.value=this.get()}var e,n,o;return e=t,(n=[{key:"update",value:function(){this.run()}},{key:"run",value:function(){var t=this.get(),e=this.value;t!==e&&(this.value=t,this.cb.call(this.vm,t,e))}},{key:"get",value:function(){i.Dep.target=this;var t=this.getter.call(this.vm,this.vm);return i.Dep.target=null,t}},{key:"addDep",value:function(t){this.depIds.hasOwnProperty(t.id)||(t.addSub(this),this.depIds[t.id]=t)}},{key:"parseGetter",value:function(t){if(!/[^\w.$]/.test(t)){var e=t.split(".");return function(t){for(var n=0,i=e.length;n<i;n++){if(!t)return;t=t[e[n]]}return t}}}}])&&r(e.prototype,n),o&&r(e,o),t}()},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(console.log(t),t&&"object"===o(t))return new a(t)}n.r(e),n.d(e,"default",(function(){return u})),n.d(e,"Dep",(function(){return c}));var a=function t(e){var n=this;r(this,t),this.walk=function(t){Object.keys(t).forEach((function(e){n.observeProperty(t,e,t[e])}))},this.observeProperty=function(t,e,n){var i=new c,r=u(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return i.target&&i.depend(),r&&r.dep.depend(),n},set:function(t){n===t||t!=t&&n!=n||(n=t,r=u(t),i.notify())}})},this.value=e,this.walk(e)},s=0,c=function(){function t(){r(this,t),this.target=null,this.id=s++,this.subs=[]}var e,n,o;return e=t,(n=[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"removeSub",value:function(t){var e=this.subs.indexOf(t);-1!==e&&this.subs.splice(e,1)}},{key:"notify",value:function(){this.subs.forEach((function(t){t.update()}))}},{key:"depend",value:function(){t.target.addDep(this)}}])&&i(e.prototype,n),o&&i(e,o),t}()}]).default}));